é1
HC:\VisualStudio\WorkoutApp\Back-End\API\Controllers\AccountController.cs
	namespace		 	
API		
 
.		 
Controllers		 
{

 
public 

class 
AccountController "
:# $
BaseAPIController% 6
{ 
private 
readonly 
DataContext $
_context% -
;- .
private 
readonly 
ITokenService &
_tokenService' 4
;4 5
public 
AccountController  
(  !
DataContext! ,
context- 4
,4 5
ITokenService6 C
tokenServiceD P
)P Q
{ 	
_context 
= 
context 
; 
_tokenService 
= 
tokenService (
;( )
} 	
[ 	
HttpPost	 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult &
<& '
UserDto' .
>. /
>/ 0
Register1 9
(9 :
RegisterDTO: E
registerDTOF Q
)Q R
{ 	
if 
( 
await 

UserExists 
(  
registerDTO  +
.+ ,
Username, 4
)4 5
)5 6
{ 
return 

BadRequest !
(! "
$str" 5
)5 6
;6 7
} 
using 
var 
hmac 
= 
new  

HMACSHA512! +
(+ ,
), -
;- .
var   
user   
=   
new   
AppUser   "
{!! 
UserName"" 
="" 
registerDTO"" &
.""& '
Username""' /
.""/ 0
ToLower""0 7
(""7 8
)""8 9
,""9 :
PasswordHash## 
=## 
hmac## #
.### $
ComputeHash##$ /
(##/ 0
Encoding##0 8
.##8 9
UTF8##9 =
.##= >
GetBytes##> F
(##F G
registerDTO##G R
.##R S
Password##S [
)##[ \
)##\ ]
,##] ^
PasswordSalt$$ 
=$$ 
hmac$$ #
.$$# $
Key$$$ '
}%% 
;%% 
_context'' 
.'' 
Users'' 
.'' 
Add'' 
('' 
user'' #
)''# $
;''$ %
await)) 
_context)) 
.)) 
SaveChangesAsync)) +
())+ ,
))), -
;))- .
return++ 
new++ 
UserDto++ 
{,, 
Username-- 
=-- 
user-- 
.--  
UserName--  (
,--( )
Token.. 
=.. 
_tokenService.. %
...% &
CreateToken..& 1
(..1 2
user..2 6
)..6 7
}// 
;// 
}22 	
[44 	
HttpPost44	 
(44 
$str44 
)44 
]44 
public55 
async55 
Task55 
<55 
ActionResult55 &
<55& '
UserDto55' .
>55. /
>55/ 0
Login551 6
(556 7
LoginDTO557 ?
loginDto55@ H
)55H I
{66 	
var77 
user77 
=77 
await77 
_context77 %
.77% &
Users77& +
.77+ , 
SingleOrDefaultAsync77, @
(77@ A
x77A B
=>77C E
x77F G
.77G H
UserName77H P
==77Q S
loginDto77T \
.77\ ]
Username77] e
)77e f
;77f g
if99 
(99 
user99 
==99 
null99 
)99 
return99 $
Unauthorized99% 1
(991 2
$str992 I
)99I J
;99J K
using;; 
var;; 
hmac;; 
=;; 
new;;  

HMACSHA512;;! +
(;;+ ,
user;;, 0
.;;0 1
PasswordSalt;;1 =
);;= >
;;;> ?
var== 
computedHash== 
=== 
hmac== #
.==# $
ComputeHash==$ /
(==/ 0
Encoding==0 8
.==8 9
UTF8==9 =
.=== >
GetBytes==> F
(==F G
loginDto==G O
.==O P
Password==P X
)==X Y
)==Y Z
;==Z [
for?? 
(?? 
int?? 
i?? 
=?? 
$num?? 
;?? 
i?? 
<??  
computedHash??! -
.??- .
Length??. 4
;??4 5
i??6 7
++??7 9
)??9 :
{@@ 
ifAA 
(AA 
computedHashAA  
[AA  !
iAA! "
]AA" #
!=AA$ &
userAA' +
.AA+ ,
PasswordHashAA, 8
[AA8 9
iAA9 :
]AA: ;
)AA; <
returnAA= C
UnauthorizedAAD P
(AAP Q
$strAAQ h
)AAh i
;AAi j
}BB 
returnDD 
newDD 
UserDtoDD 
{EE 
UsernameFF 
=FF 
userFF 
.FF  
UserNameFF  (
,FF( )
TokenGG 
=GG 
_tokenServiceGG %
.GG% &
CreateTokenGG& 1
(GG1 2
userGG2 6
)GG6 7
}HH 
;HH 
}JJ 	
privateLL 
asyncLL 
TaskLL 
<LL 
boolLL 
>LL  

UserExistsLL! +
(LL+ ,
stringLL, 2
usernameLL3 ;
)LL; <
{MM 	
returnNN 
awaitNN 
_contextNN !
.NN! "
UsersNN" '
.NN' (
AnyAsyncNN( 0
(NN0 1
xNN1 2
=>NN3 5
xNN6 7
.NN7 8
UserNameNN8 @
==NNA C
usernameNND L
.NNL M
ToLowerNNM T
(NNT U
)NNU V
)NNV W
;NNW X
}OO 	
}RR 
}SS €
HC:\VisualStudio\WorkoutApp\Back-End\API\Controllers\BaseAPIController.cs
	namespace 	
API
 
. 
Controllers 
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class 
BaseAPIController "
:# $
ControllerBase% 3
{ 
}		 
}

 Û
EC:\VisualStudio\WorkoutApp\Back-End\API\Controllers\BugsController.cs
	namespace 	
API
 
. 
Controllers 
{ 
public 

class 
BugsController 
:  !
BaseAPIController" 3
{ 
private		 
readonly		 
DataContext		 $
_context		% -
;		- .
public

 
BugsController

 
(

 
DataContext

 )
context

* 1
)

1 2
{ 	
_context 
= 
context 
; 
} 	
[ 	
	Authorize	 
] 
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
ActionResult 
< 
string "
>" #
	GetSecret$ -
(- .
). /
{ 	
return 
$str  
;  !
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
ActionResult 
< 
AppUser #
># $
GetNotFound% 0
(0 1
)1 2
{ 	
var 
thing 
= 
_context  
.  !
Users! &
.& '
Find' +
(+ ,
-, -
$num- .
). /
;/ 0
if 
( 
thing 
== 
null 
) 
return $
NotFound% -
(- .
). /
;/ 0
return 
Ok 
( 
thing 
) 
; 
} 	
[   	
HttpGet  	 
(   
$str   
)    
]    !
public!! 
ActionResult!! 
<!! 
string!! "
>!!" #
GetServerError!!$ 2
(!!2 3
)!!3 4
{"" 	
var$$ 
thing$$ 
=$$ 
_context$$  
.$$  !
Users$$! &
.$$& '
Find$$' +
($$+ ,
-$$, -
$num$$- .
)$$. /
;$$/ 0
var&& 
thingToReturn&& 
=&& 
thing&&  %
.&&% &
ToString&&& .
(&&. /
)&&/ 0
;&&0 1
return(( 
thingToReturn((  
;((  !
}** 	
[,, 	
HttpGet,,	 
(,, 
$str,, 
),, 
],,  
public-- 
ActionResult-- 
<-- 
string-- "
>--" #
GetBadRequest--$ 1
(--1 2
)--2 3
{.. 	
return// 

BadRequest// 
(// 
$str// ;
)//; <
;//< =
}00 	
}22 
}33 Ÿ#
JC:\VisualStudio\WorkoutApp\Back-End\API\Controllers\ExercisesController.cs
	namespace 	
API
 
. 
Controllers 
{		 
public

 

class

 
ExercisesController

 $
:

% &
BaseAPIController

' 8
{ 
private 
readonly  
IExercisesRepository -
_exerciseRepository. A
;A B
private 
readonly 
IMapper  
mapper! '
;' (
public 
ExercisesController "
(" # 
IExercisesRepository# 7
exerciseRepository8 J
,J K
IMapperL S
mapperT Z
)Z [
{ 	
_exerciseRepository 
=  !
exerciseRepository" 4
;4 5
this 
. 
mapper 
= 
mapper  
;  !
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
	Exercises3 <
>< =
>= >
>> ?
GetExercises@ L
(L M
)M N
{ 	
var 
	exercises 
= 
await !
_exerciseRepository" 5
.5 6
GetAllExercises6 E
(E F
)F G
;G H
var 
exercisesToReturn !
=" #
this$ (
.( )
mapper) /
./ 0
Map0 3
<3 4
IEnumerable4 ?
<? @
ExerciseDTO@ K
>K L
>L M
(M N
	exercisesN W
)W X
;X Y
return 
Ok 
( 
exercisesToReturn '
)' (
;( )
} 	
[   	
	Authorize  	 
]   
[!! 	
HttpGet!!	 
(!! 
$str!! 
)!! 
]!! 
public"" 
async"" 
Task"" 
<"" 
ActionResult"" &
<""& '
	Exercises""' 0
>""0 1
>""1 2
GetExerciseID""3 @
(""@ A
int""A D
id""E G
)""G H
{## 	
return$$ 
await$$ 
_exerciseRepository$$ ,
.$$, -
GetExercisesbyID$$- =
($$= >
id$$> @
)$$@ A
;$$A B
}%% 	
['' 	
	Authorize''	 
]'' 
[(( 	
HttpGet((	 
((( 
$str(( 
)(( 
](( 
public)) 
async)) 
Task)) 
<)) 
ActionResult)) &
<))& '
	Exercises))' 0
>))0 1
>))1 2
GetExerciseName))3 B
())B C
string))C I
name))J N
)))N O
{** 	
return++ 
await++ 
_exerciseRepository++ ,
.++, -
GetExercisebyName++- >
(++> ?
name++? C
)++C D
;++D E
},, 	
[.. 	
	Authorize..	 
].. 
[// 	
HttpPut//	 
(// 
$str// 
)// 
]// 
public00 
async00 
Task00 
<00 
ActionResult00 &
>00& '
UpdateExercises00( 7
(007 8
ExerciseUpdateDTO008 I
	exercises00J S
)00S T
{11 	
var22 
exercise22 
=22 
await22  
_exerciseRepository22! 4
.224 5
GetExercisebyName225 F
(22F G
	exercises22G P
.22P Q
Name22Q U
)22U V
;22V W
this44 
.44 
mapper44 
.44 
Map44 
(44 
	exercises44 %
,44% &
exercise44' /
)44/ 0
;440 1
_exerciseRepository66 
.66  
Update66  &
(66& '
exercise66' /
)66/ 0
;660 1
if88 
(88 
await88 
_exerciseRepository88 )
.88) *
SaveAllAsync88* 6
(886 7
)887 8
)888 9
return88: @
	NoContent88A J
(88J K
)88K L
;88L M
return:: 

BadRequest:: 
(:: 
$str:: 9
)::9 :
;::: ;
};; 	
}== 
}>> ”
FC:\VisualStudio\WorkoutApp\Back-End\API\Controllers\UsersController.cs
	namespace		 	
API		
 
.		 
Controllers		 
{

 
public 

class 
UsersController  
:! "
BaseAPIController# 4
{ 
private 
readonly 
IUserRepository (
_userRepository) 8
;8 9
private 
readonly 
IMapper  
mapper! '
;' (
public 
UsersController 
( 
IUserRepository .
userRepository/ =
,= >
IMapper? F
mapperG M
)M N
{ 	
_userRepository 
= 
userRepository ,
;, -
this 
. 
mapper 
= 
mapper  
;  !
} 	
[   	
HttpGet  	 
(   
$str   
)   
]   
public!! 
async!! 
Task!! 
<!! 
ActionResult!! &
<!!& '
	MemberDTO!!' 0
>!!0 1
>!!1 2
GetUser!!3 :
(!!: ;
int!!; >
id!!? A
)!!A B
{"" 	
var## 
user## 
=## 
await## 
_userRepository## ,
.##, -
GetByIdAsync##- 9
(##9 :
id##: <
)##< =
;##= >
return$$ 
this$$ 
.$$ 
mapper$$ 
.$$ 
Map$$ "
<$$" #
	MemberDTO$$# ,
>$$, -
($$- .
user$$. 2
)$$2 3
;$$3 4
}%% 	
})) 
}** Ì
IC:\VisualStudio\WorkoutApp\Back-End\API\Controllers\WorkoutsController.cs
	namespace 	
API
 
. 
Controllers 
{ 
public 

class 
WorkoutsController #
:$ %
BaseAPIController& 7
{		 
private

 
readonly

 
IWorkoutRepository

 /
_WorkoutRepository

0 B
;

B C
public 
WorkoutsController %
(% &
IWorkoutRepository& 8
workoutRepository9 J
)J K
{ 
_WorkoutRepository &
=' (
workoutRepository) :
;: ;
} 
[ 
HttpGet 
] 
public 
async 
Task 
< 
IEnumerable )
<) *
Workouts* 2
>2 3
>3 4
GetWorkouts5 @
(@ A
)A B
{ 
return 
await 
_WorkoutRepository +
.+ ,
GetAllWorkouts, :
(: ;
); <
;< =
} 
[ 
	Authorize 
] 
[ 
HttpGet 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult *
<* +
Workouts+ 3
>3 4
>4 5
GetWorkoutbyID6 D
(D E
intE H
idI K
)K L
{ 
return 
await 
_WorkoutRepository /
./ 0
GetWorkoutsbyId0 ?
(? @
id@ B
)B C
;C D
} 
[ 
	Authorize 
] 
[   
HttpGet   
(   
$str   
)   
]   
public!! 
async!! 
Task!! 
<!! 
ActionResult!! *
<!!* +
Workouts!!+ 3
>!!3 4
>!!4 5
GetWorkoutByName!!6 F
(!!F G
string!!G M
name!!N R
)!!R S
{"" 
return## 
await## 
_WorkoutRepository## /
.##/ 0
GetWorkoutbyName##0 @
(##@ A
name##A E
)##E F
;##F G
}$$ 
}&& 
}'' Ê	
;C:\VisualStudio\WorkoutApp\Back-End\API\Data\DataContext.cs
	namespace 	
API
 
. 
Data 
{ 
public 

class 
DataContext 
: 
	DbContext (
{ 
public 
DataContext 
( 
) 
{		 	
}

 	
public 
DataContext 
( 
DbContextOptions +
options, 3
)3 4
:5 6
base7 ;
(; <
options< C
)C D
{ 	
} 	
public 
DbSet 
< 
AppUser 
> 
Users #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
DbSet 
< 
	Exercises 
> 
	Exercises  )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
DbSet 
< 
Workouts 
> 
Workouts '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} ™
CC:\VisualStudio\WorkoutApp\Back-End\API\Data\ExercisesRepository.cs
	namespace 	
API
 
. 
Data 
{ 
public 

class 
ExercisesRepository $
:% & 
IExercisesRepository' ;
{ 
private		 
readonly		 
DataContext		 $
_context		% -
;		- .
public 
ExercisesRepository "
(" #
DataContext# .
context/ 6
)6 7
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
	Exercises #
># $
GetExercisesbyID% 5
(5 6
int6 9
id: <
)< =
{ 	
return 
await 
_context !
.! "
	Exercises" +
. 
Include 
( 
p 
=> 
p 
.  
Photo  %
)% &
. 
Include 
( 
w 
=> 
w 
.  
Workouts  (
)( )
. 
FirstOrDefaultAsync $
($ %
x% &
=>' )
x* +
.+ ,
Id, .
==/ 1
id2 4
)4 5
;5 6
} 	
public 
async 
Task 
< 
IEnumerable %
<% &
	Exercises& /
>/ 0
>0 1
GetAllExercises2 A
(A B
)B C
{ 	
return 
await 
_context !
.! "
	Exercises" +
. 
Include 
( 
p 
=> 
p 
.  
Photo  %
)% &
. 
Include 
( 
w 
=> 
w 
.  
Workouts  (
)( )
. 
ToListAsync 
( 
) 
; 
} 	
public   
async   
Task   
<   
	Exercises   #
>  # $
GetExercisebyName  % 6
(  6 7
string  7 =
name  > B
)  B C
{!! 	
return"" 
await"" 
_context"" !
.""! "
	Exercises""" +
.## 
Include## 
(## 
p## 
=>## 
p## 
.##  
Photo##  %
)##% &
.$$ 
Include$$ 
($$ 
w$$ 
=>$$ 
w$$ 
.$$  
Workouts$$  (
)$$( )
.%% 
FirstOrDefaultAsync%% $
(%%$ %
x%%% &
=>%%' )
x%%* +
.%%+ ,
Name%%, 0
==%%1 3
name%%4 8
)%%8 9
;%%9 :
}&& 	
public(( 
void(( 
Update(( 
((( 
	Exercises(( $
exercise((% -
)((- .
{)) 	
throw** 
new** #
NotImplementedException** -
(**- .
)**. /
;**/ 0
}++ 	
public-- 
Task-- 
<-- 
bool-- 
>-- 
SaveAllAsync-- &
(--& '
)--' (
{.. 	
throw// 
new// #
NotImplementedException// -
(//- .
)//. /
;/// 0
}00 	
}11 
}22 Ô
WC:\VisualStudio\WorkoutApp\Back-End\API\Data\Migrations\20211114211215_InitialCreate.cs
	namespace 	
API
 
. 
Data 
. 

Migrations 
{ 
public 

partial 
class 
InitialCreate &
:' (
	Migration) 2
{ 
	protected		 
override		 
void		 
Up		  "
(		" #
MigrationBuilder		# 3
migrationBuilder		4 D
)		D E
{

 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
, 
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 :
,: ;
nullable< D
:D E
falseF K
)K L
. 

Annotation #
(# $
$str$ :
,: ;
true< @
)@ A
,A B
UserName 
= 
table $
.$ %
Column% +
<+ ,
string, 2
>2 3
(3 4
type4 8
:8 9
$str: @
,@ A
nullableB J
:J K
trueL P
)P Q
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% /
,/ 0
x1 2
=>3 5
x6 7
.7 8
Id8 :
): ;
;; <
} 
) 
; 
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 
	DropTable &
(& '
name 
: 
$str 
) 
; 
} 	
} 
} ﬁ
[C:\VisualStudio\WorkoutApp\Back-End\API\Data\Migrations\20211115151344_UserPasswordAdded.cs
	namespace 	
API
 
. 
Data 
. 

Migrations 
{ 
public 

partial 
class 
UserPasswordAdded *
:+ ,
	Migration- 6
{		 
	protected

 
override

 
void

 
Up

  "
(

" #
MigrationBuilder

# 3
migrationBuilder

4 D
)

D E
{ 	
migrationBuilder 
. 
	AddColumn &
<& '
byte' +
[+ ,
], -
>- .
(. /
name 
: 
$str $
,$ %
table 
: 
$str 
, 
type 
: 
$str 
, 
nullable 
: 
true 
) 
;  
migrationBuilder 
. 
	AddColumn &
<& '
byte' +
[+ ,
], -
>- .
(. /
name 
: 
$str $
,$ %
table 
: 
$str 
, 
type 
: 
$str 
, 
nullable 
: 
true 
) 
;  
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str $
,$ %
table 
: 
$str 
) 
;  
migrationBuilder 
. 

DropColumn '
(' (
name   
:   
$str   $
,  $ %
table!! 
:!! 
$str!! 
)!! 
;!!  
}"" 	
}## 
}$$ a
ZC:\VisualStudio\WorkoutApp\Back-End\API\Data\Migrations\20211122233321_AddWorkoutTables.cs
	namespace 	
API
 
. 
Data 
. 

Migrations 
{ 
public 

partial 
class 
AddWorkoutTables )
:* +
	Migration, 5
{		 
	protected

 
override

 
void

 
Up

  "
(

" #
MigrationBuilder

# 3
migrationBuilder

4 D
)

D E
{ 	
migrationBuilder 
. 
	AddColumn &
<& '
int' *
>* +
(+ ,
name 
: 
$str !
,! "
table 
: 
$str 
, 
type 
: 
$str 
,  
nullable 
: 
true 
) 
;  
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str !
,! "
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 :
,: ;
nullable< D
:D E
falseF K
)K L
. 

Annotation #
(# $
$str$ :
,: ;
true< @
)@ A
,A B
Name 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
type0 4
:4 5
$str6 <
,< =
nullable> F
:F G
trueH L
)L M
,M N
Muscle 
= 
table "
." #
Column# )
<) *
string* 0
>0 1
(1 2
type2 6
:6 7
$str8 >
,> ?
nullable@ H
:H I
trueJ N
)N O
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 3
,3 4
x5 6
=>7 9
x: ;
.; <
Id< >
)> ?
;? @
} 
) 
; 
migrationBuilder   
.   
CreateTable   (
(  ( )
name!! 
:!! 
$str!! 
,!!  
columns"" 
:"" 
table"" 
=>"" !
new""" %
{## 
id$$ 
=$$ 
table$$ 
.$$ 
Column$$ %
<$$% &
int$$& )
>$$) *
($$* +
type$$+ /
:$$/ 0
$str$$1 :
,$$: ;
nullable$$< D
:$$D E
false$$F K
)$$K L
.%% 

Annotation%% #
(%%# $
$str%%$ :
,%%: ;
true%%< @
)%%@ A
}&& 
,&& 
constraints'' 
:'' 
table'' "
=>''# %
{(( 
table)) 
.)) 

PrimaryKey)) $
())$ %
$str))% 1
,))1 2
x))3 4
=>))5 7
x))8 9
.))9 :
id)): <
)))< =
;))= >
}** 
)** 
;** 
migrationBuilder,, 
.,, 
CreateTable,, (
(,,( )
name-- 
:-- 
$str-- 
,-- 
columns.. 
:.. 
table.. 
=>.. !
new.." %
{// 
Id00 
=00 
table00 
.00 
Column00 %
<00% &
int00& )
>00) *
(00* +
type00+ /
:00/ 0
$str001 :
,00: ;
nullable00< D
:00D E
false00F K
)00K L
.11 

Annotation11 #
(11# $
$str11$ :
,11: ;
true11< @
)11@ A
,11A B
Url22 
=22 
table22 
.22  
Column22  &
<22& '
string22' -
>22- .
(22. /
type22/ 3
:223 4
$str225 ;
,22; <
nullable22= E
:22E F
true22G K
)22K L
,22L M
ExercisesId33 
=33  !
table33" '
.33' (
Column33( .
<33. /
int33/ 2
>332 3
(333 4
type334 8
:338 9
$str33: C
,33C D
nullable33E M
:33M N
true33O S
)33S T
}44 
,44 
constraints55 
:55 
table55 "
=>55# %
{66 
table77 
.77 

PrimaryKey77 $
(77$ %
$str77% /
,77/ 0
x771 2
=>773 5
x776 7
.777 8
Id778 :
)77: ;
;77; <
table88 
.88 

ForeignKey88 $
(88$ %
name99 
:99 
$str99 >
,99> ?
column:: 
::: 
x::  !
=>::" $
x::% &
.::& '
ExercisesId::' 2
,::2 3
principalTable;; &
:;;& '
$str;;( 3
,;;3 4
principalColumn<< '
:<<' (
$str<<) -
)<<- .
;<<. /
}== 
)== 
;== 
migrationBuilder?? 
.?? 
CreateTable?? (
(??( )
name@@ 
:@@ 
$str@@  
,@@  !
columnsAA 
:AA 
tableAA 
=>AA !
newAA" %
{BB 
IdCC 
=CC 
tableCC 
.CC 
ColumnCC %
<CC% &
intCC& )
>CC) *
(CC* +
typeCC+ /
:CC/ 0
$strCC1 :
,CC: ;
nullableCC< D
:CCD E
falseCCF K
)CCK L
.DD 

AnnotationDD #
(DD# $
$strDD$ :
,DD: ;
trueDD< @
)DD@ A
,DDA B
NameEE 
=EE 
tableEE  
.EE  !
ColumnEE! '
<EE' (
stringEE( .
>EE. /
(EE/ 0
typeEE0 4
:EE4 5
$strEE6 <
,EE< =
nullableEE> F
:EEF G
trueEEH L
)EEL M
,EEM N
UserIdIdFF 
=FF 
tableFF $
.FF$ %
ColumnFF% +
<FF+ ,
intFF, /
>FF/ 0
(FF0 1
typeFF1 5
:FF5 6
$strFF7 @
,FF@ A
nullableFFB J
:FFJ K
trueFFL P
)FFP Q
,FFQ R
TimeGG 
=GG 
tableGG  
.GG  !
ColumnGG! '
<GG' (
TimeOnlyGG( 0
>GG0 1
(GG1 2
typeGG2 6
:GG6 7
$strGG8 >
,GG> ?
nullableGG@ H
:GGH I
falseGGJ O
)GGO P
,GGP Q
DateHH 
=HH 
tableHH  
.HH  !
ColumnHH! '
<HH' (
DateTimeHH( 0
>HH0 1
(HH1 2
typeHH2 6
:HH6 7
$strHH8 >
,HH> ?
nullableHH@ H
:HHH I
falseHHJ O
)HHO P
,HHP Q
	HistoryidII 
=II 
tableII  %
.II% &
ColumnII& ,
<II, -
intII- 0
>II0 1
(II1 2
typeII2 6
:II6 7
$strII8 A
,IIA B
nullableIIC K
:IIK L
trueIIM Q
)IIQ R
}JJ 
,JJ 
constraintsKK 
:KK 
tableKK "
=>KK# %
{LL 
tableMM 
.MM 

PrimaryKeyMM $
(MM$ %
$strMM% 2
,MM2 3
xMM4 5
=>MM6 8
xMM9 :
.MM: ;
IdMM; =
)MM= >
;MM> ?
tableNN 
.NN 

ForeignKeyNN $
(NN$ %
nameOO 
:OO 
$strOO =
,OO= >
columnPP 
:PP 
xPP  !
=>PP" $
xPP% &
.PP& '
	HistoryidPP' 0
,PP0 1
principalTableQQ &
:QQ& '
$strQQ( 1
,QQ1 2
principalColumnRR '
:RR' (
$strRR) -
)RR- .
;RR. /
tableSS 
.SS 

ForeignKeySS $
(SS$ %
nameTT 
:TT 
$strTT :
,TT: ;
columnUU 
:UU 
xUU  !
=>UU" $
xUU% &
.UU& '
UserIdIdUU' /
,UU/ 0
principalTableVV &
:VV& '
$strVV( /
,VV/ 0
principalColumnWW '
:WW' (
$strWW) -
)WW- .
;WW. /
}XX 
)XX 
;XX 
migrationBuilderZZ 
.ZZ 
CreateIndexZZ (
(ZZ( )
name[[ 
:[[ 
$str[[ *
,[[* +
table\\ 
:\\ 
$str\\ 
,\\ 
column]] 
:]] 
$str]] #
)]]# $
;]]$ %
migrationBuilder__ 
.__ 
CreateIndex__ (
(__( )
name`` 
:`` 
$str`` ,
,``, -
tableaa 
:aa 
$straa 
,aa 
columnbb 
:bb 
$strbb %
)bb% &
;bb& '
migrationBuilderdd 
.dd 
CreateIndexdd (
(dd( )
nameee 
:ee 
$stree -
,ee- .
tableff 
:ff 
$strff !
,ff! "
columngg 
:gg 
$strgg #
)gg# $
;gg$ %
migrationBuilderii 
.ii 
CreateIndexii (
(ii( )
namejj 
:jj 
$strjj ,
,jj, -
tablekk 
:kk 
$strkk !
,kk! "
columnll 
:ll 
$strll "
)ll" #
;ll# $
migrationBuildernn 
.nn 
AddForeignKeynn *
(nn* +
nameoo 
:oo 
$stroo 2
,oo2 3
tablepp 
:pp 
$strpp 
,pp 
columnqq 
:qq 
$strqq #
,qq# $
principalTablerr 
:rr 
$strrr  )
,rr) *
principalColumnss 
:ss  
$strss! %
)ss% &
;ss& '
}tt 	
	protectedvv 
overridevv 
voidvv 
Downvv  $
(vv$ %
MigrationBuildervv% 5
migrationBuildervv6 F
)vvF G
{ww 	
migrationBuilderxx 
.xx 
DropForeignKeyxx +
(xx+ ,
nameyy 
:yy 
$stryy 2
,yy2 3
tablezz 
:zz 
$strzz 
)zz 
;zz  
migrationBuilder|| 
.|| 
	DropTable|| &
(||& '
name}} 
:}} 
$str}} 
)}} 
;}} 
migrationBuilder 
. 
	DropTable &
(& '
name
ÄÄ 
:
ÄÄ 
$str
ÄÄ  
)
ÄÄ  !
;
ÄÄ! "
migrationBuilder
ÇÇ 
.
ÇÇ 
	DropTable
ÇÇ &
(
ÇÇ& '
name
ÉÉ 
:
ÉÉ 
$str
ÉÉ !
)
ÉÉ! "
;
ÉÉ" #
migrationBuilder
ÖÖ 
.
ÖÖ 
	DropTable
ÖÖ &
(
ÖÖ& '
name
ÜÜ 
:
ÜÜ 
$str
ÜÜ 
)
ÜÜ  
;
ÜÜ  !
migrationBuilder
àà 
.
àà 
	DropIndex
àà &
(
àà& '
name
ââ 
:
ââ 
$str
ââ *
,
ââ* +
table
ää 
:
ää 
$str
ää 
)
ää 
;
ää  
migrationBuilder
åå 
.
åå 

DropColumn
åå '
(
åå' (
name
çç 
:
çç 
$str
çç !
,
çç! "
table
éé 
:
éé 
$str
éé 
)
éé 
;
éé  
}
èè 	
}
êê 
}ëë î
[C:\VisualStudio\WorkoutApp\Back-End\API\Data\Migrations\20211122234524_AddWorkoutTableV2.cs
	namespace 	
API
 
. 
Data 
. 

Migrations 
{ 
public 

partial 
class 
AddWorkoutTableV2 *
:+ ,
	Migration- 6
{ 
	protected		 
override		 
void		 
Up		  "
(		" #
MigrationBuilder		# 3
migrationBuilder		4 D
)		D E
{

 	
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
} 	
} 
} Öq
SC:\VisualStudio\WorkoutApp\Back-End\API\Data\Migrations\20211208151448_Relations.cs
	namespace 	
API
 
. 
Data 
. 

Migrations 
{ 
public 

partial 
class 
	Relations "
:# $
	Migration% .
{		 
	protected

 
override

 
void

 
Up

  "
(

" #
MigrationBuilder

# 3
migrationBuilder

4 D
)

D E
{ 	
migrationBuilder 
. 
DropForeignKey +
(+ ,
name 
: 
$str 6
,6 7
table 
: 
$str 
) 
;  
migrationBuilder 
. 
DropForeignKey +
(+ ,
name 
: 
$str 2
,2 3
table 
: 
$str 
) 
;  
migrationBuilder 
. 
DropForeignKey +
(+ ,
name 
: 
$str 5
,5 6
table 
: 
$str !
)! "
;" #
migrationBuilder 
. 
	DropTable &
(& '
name 
: 
$str 
)  
;  !
migrationBuilder 
. 
	DropIndex &
(& '
name 
: 
$str *
,* +
table 
: 
$str 
) 
;  
migrationBuilder 
. 
DropPrimaryKey +
(+ ,
name   
:   
$str    
,    !
table!! 
:!! 
$str!! 
)!! 
;!!  
migrationBuilder## 
.## 

DropColumn## '
(##' (
name$$ 
:$$ 
$str$$ !
,$$! "
table%% 
:%% 
$str%% 
)%% 
;%%  
migrationBuilder'' 
.'' 
RenameTable'' (
(''( )
name(( 
:(( 
$str(( 
,(( 
newName)) 
:)) 
$str)) !
)))! "
;))" #
migrationBuilder++ 
.++ 
RenameColumn++ )
(++) *
name,, 
:,, 
$str,, !
,,,! "
table-- 
:-- 
$str-- !
,--! "
newName.. 
:.. 
$str.. &
)..& '
;..' (
migrationBuilder00 
.00 
RenameIndex00 (
(00( )
name11 
:11 
$str11 -
,11- .
table22 
:22 
$str22 !
,22! "
newName33 
:33 
$str33 2
)332 3
;333 4
migrationBuilder55 
.55 
RenameIndex55 (
(55( )
name66 
:66 
$str66 ,
,66, -
table77 
:77 
$str77 
,77  
newName88 
:88 
$str88 0
)880 1
;881 2
migrationBuilder:: 
.:: 
	AddColumn:: &
<::& '
DateTime::' /
>::/ 0
(::0 1
name;; 
:;; 
$str;; 
,;;  
table<< 
:<< 
$str<< 
,<< 
type== 
:== 
$str== 
,== 
nullable>> 
:>> 
false>> 
,>>  
defaultValue?? 
:?? 
new?? !
DateTime??" *
(??* +
$num??+ ,
,??, -
$num??. /
,??/ 0
$num??1 2
,??2 3
$num??4 5
,??5 6
$num??7 8
,??8 9
$num??: ;
,??; <
$num??= >
,??> ?
DateTimeKind??@ L
.??L M
Unspecified??M X
)??X Y
)??Y Z
;??Z [
migrationBuilderAA 
.AA 
	AddColumnAA &
<AA& '
intAA' *
>AA* +
(AA+ ,
nameBB 
:BB 
$strBB !
,BB! "
tableCC 
:CC 
$strCC 
,CC  
typeDD 
:DD 
$strDD 
,DD  
nullableEE 
:EE 
falseEE 
,EE  
defaultValueFF 
:FF 
$numFF 
)FF  
;FF  !
migrationBuilderHH 
.HH 
	AddColumnHH &
<HH& '
boolHH' +
>HH+ ,
(HH, -
nameII 
:II 
$strII 
,II 
tableJJ 
:JJ 
$strJJ 
,JJ  
typeKK 
:KK 
$strKK 
,KK  
nullableLL 
:LL 
falseLL 
,LL  
defaultValueMM 
:MM 
falseMM #
)MM# $
;MM$ %
migrationBuilderOO 
.OO 
AddPrimaryKeyOO *
(OO* +
namePP 
:PP 
$strPP !
,PP! "
tableQQ 
:QQ 
$strQQ 
,QQ  
columnRR 
:RR 
$strRR 
)RR 
;RR 
migrationBuilderTT 
.TT 
CreateIndexTT (
(TT( )
nameUU 
:UU 
$strUU +
,UU+ ,
tableVV 
:VV 
$strVV 
,VV  
columnWW 
:WW 
$strWW #
)WW# $
;WW$ %
migrationBuilderYY 
.YY 
AddForeignKeyYY *
(YY* +
nameZZ 
:ZZ 
$strZZ 7
,ZZ7 8
table[[ 
:[[ 
$str[[ 
,[[  
column\\ 
:\\ 
$str\\ %
,\\% &
principalTable]] 
:]] 
$str]]  +
,]]+ ,
principalColumn^^ 
:^^  
$str^^! %
)^^% &
;^^& '
migrationBuilder`` 
.`` 
AddForeignKey`` *
(``* +
nameaa 
:aa 
$straa 1
,aa1 2
tablebb 
:bb 
$strbb 
,bb  
columncc 
:cc 
$strcc #
,cc# $
principalTabledd 
:dd 
$strdd  '
,dd' (
principalColumnee 
:ee  
$stree! %
,ee% &
onDeleteff 
:ff 
ReferentialActionff +
.ff+ ,
Cascadeff, 3
)ff3 4
;ff4 5
migrationBuilderhh 
.hh 
AddForeignKeyhh *
(hh* +
nameii 
:ii 
$strii 9
,ii9 :
tablejj 
:jj 
$strjj !
,jj! "
columnkk 
:kk 
$strkk %
,kk% &
principalTablell 
:ll 
$strll  +
,ll+ ,
principalColumnmm 
:mm  
$strmm! %
)mm% &
;mm& '
}nn 	
	protectedpp 
overridepp 
voidpp 
Downpp  $
(pp$ %
MigrationBuilderpp% 5
migrationBuilderpp6 F
)ppF G
{qq 	
migrationBuilderrr 
.rr 
DropForeignKeyrr +
(rr+ ,
namess 
:ss 
$strss 7
,ss7 8
tablett 
:tt 
$strtt 
)tt  
;tt  !
migrationBuildervv 
.vv 
DropForeignKeyvv +
(vv+ ,
nameww 
:ww 
$strww 1
,ww1 2
tablexx 
:xx 
$strxx 
)xx  
;xx  !
migrationBuilderzz 
.zz 
DropForeignKeyzz +
(zz+ ,
name{{ 
:{{ 
$str{{ 9
,{{9 :
table|| 
:|| 
$str|| !
)||! "
;||" #
migrationBuilder~~ 
.~~ 
DropPrimaryKey~~ +
(~~+ ,
name 
: 
$str !
,! "
table
ÄÄ 
:
ÄÄ 
$str
ÄÄ 
)
ÄÄ  
;
ÄÄ  !
migrationBuilder
ÇÇ 
.
ÇÇ 
	DropIndex
ÇÇ &
(
ÇÇ& '
name
ÉÉ 
:
ÉÉ 
$str
ÉÉ +
,
ÉÉ+ ,
table
ÑÑ 
:
ÑÑ 
$str
ÑÑ 
)
ÑÑ  
;
ÑÑ  !
migrationBuilder
ÜÜ 
.
ÜÜ 

DropColumn
ÜÜ '
(
ÜÜ' (
name
áá 
:
áá 
$str
áá 
,
áá  
table
àà 
:
àà 
$str
àà 
)
àà 
;
àà  
migrationBuilder
ää 
.
ää 

DropColumn
ää '
(
ää' (
name
ãã 
:
ãã 
$str
ãã !
,
ãã! "
table
åå 
:
åå 
$str
åå 
)
åå  
;
åå  !
migrationBuilder
éé 
.
éé 

DropColumn
éé '
(
éé' (
name
èè 
:
èè 
$str
èè 
,
èè 
table
êê 
:
êê 
$str
êê 
)
êê  
;
êê  !
migrationBuilder
íí 
.
íí 
RenameTable
íí (
(
íí( )
name
ìì 
:
ìì 
$str
ìì 
,
ìì 
newName
îî 
:
îî 
$str
îî  
)
îî  !
;
îî! "
migrationBuilder
ññ 
.
ññ 
RenameColumn
ññ )
(
ññ) *
name
óó 
:
óó 
$str
óó #
,
óó# $
table
òò 
:
òò 
$str
òò !
,
òò! "
newName
ôô 
:
ôô 
$str
ôô $
)
ôô$ %
;
ôô% &
migrationBuilder
õõ 
.
õõ 
RenameIndex
õõ (
(
õõ( )
name
úú 
:
úú 
$str
úú /
,
úú/ 0
table
ùù 
:
ùù 
$str
ùù !
,
ùù! "
newName
ûû 
:
ûû 
$str
ûû 0
)
ûû0 1
;
ûû1 2
migrationBuilder
†† 
.
†† 
RenameIndex
†† (
(
††( )
name
°° 
:
°° 
$str
°° -
,
°°- .
table
¢¢ 
:
¢¢ 
$str
¢¢ 
,
¢¢ 
newName
££ 
:
££ 
$str
££ /
)
££/ 0
;
££0 1
migrationBuilder
•• 
.
•• 
	AddColumn
•• &
<
••& '
int
••' *
>
••* +
(
••+ ,
name
¶¶ 
:
¶¶ 
$str
¶¶ !
,
¶¶! "
table
ßß 
:
ßß 
$str
ßß 
,
ßß 
type
®® 
:
®® 
$str
®® 
,
®®  
nullable
©© 
:
©© 
true
©© 
)
©© 
;
©©  
migrationBuilder
´´ 
.
´´ 
AddPrimaryKey
´´ *
(
´´* +
name
¨¨ 
:
¨¨ 
$str
¨¨  
,
¨¨  !
table
≠≠ 
:
≠≠ 
$str
≠≠ 
,
≠≠ 
column
ÆÆ 
:
ÆÆ 
$str
ÆÆ 
)
ÆÆ 
;
ÆÆ 
migrationBuilder
∞∞ 
.
∞∞ 
CreateTable
∞∞ (
(
∞∞( )
name
±± 
:
±± 
$str
±± 
,
±±  
columns
≤≤ 
:
≤≤ 
table
≤≤ 
=>
≤≤ !
new
≤≤" %
{
≥≥ 
id
¥¥ 
=
¥¥ 
table
¥¥ 
.
¥¥ 
Column
¥¥ %
<
¥¥% &
int
¥¥& )
>
¥¥) *
(
¥¥* +
type
¥¥+ /
:
¥¥/ 0
$str
¥¥1 :
,
¥¥: ;
nullable
¥¥< D
:
¥¥D E
false
¥¥F K
)
¥¥K L
.
µµ 

Annotation
µµ #
(
µµ# $
$str
µµ$ :
,
µµ: ;
true
µµ< @
)
µµ@ A
}
∂∂ 
,
∂∂ 
constraints
∑∑ 
:
∑∑ 
table
∑∑ "
=>
∑∑# %
{
∏∏ 
table
ππ 
.
ππ 

PrimaryKey
ππ $
(
ππ$ %
$str
ππ% 1
,
ππ1 2
x
ππ3 4
=>
ππ5 7
x
ππ8 9
.
ππ9 :
id
ππ: <
)
ππ< =
;
ππ= >
}
∫∫ 
)
∫∫ 
;
∫∫ 
migrationBuilder
ºº 
.
ºº 
CreateIndex
ºº (
(
ºº( )
name
ΩΩ 
:
ΩΩ 
$str
ΩΩ *
,
ΩΩ* +
table
ææ 
:
ææ 
$str
ææ 
,
ææ 
column
øø 
:
øø 
$str
øø #
)
øø# $
;
øø$ %
migrationBuilder
¡¡ 
.
¡¡ 
AddForeignKey
¡¡ *
(
¡¡* +
name
¬¬ 
:
¬¬ 
$str
¬¬ 6
,
¬¬6 7
table
√√ 
:
√√ 
$str
√√ 
,
√√ 
column
ƒƒ 
:
ƒƒ 
$str
ƒƒ %
,
ƒƒ% &
principalTable
≈≈ 
:
≈≈ 
$str
≈≈  +
,
≈≈+ ,
principalColumn
∆∆ 
:
∆∆  
$str
∆∆! %
)
∆∆% &
;
∆∆& '
migrationBuilder
»» 
.
»» 
AddForeignKey
»» *
(
»»* +
name
…… 
:
…… 
$str
…… 2
,
……2 3
table
   
:
   
$str
   
,
   
column
ÀÀ 
:
ÀÀ 
$str
ÀÀ #
,
ÀÀ# $
principalTable
ÃÃ 
:
ÃÃ 
$str
ÃÃ  )
,
ÃÃ) *
principalColumn
ÕÕ 
:
ÕÕ  
$str
ÕÕ! %
)
ÕÕ% &
;
ÕÕ& '
migrationBuilder
œœ 
.
œœ 
AddForeignKey
œœ *
(
œœ* +
name
–– 
:
–– 
$str
–– 5
,
––5 6
table
—— 
:
—— 
$str
—— !
,
——! "
column
““ 
:
““ 
$str
““ #
,
““# $
principalTable
”” 
:
”” 
$str
””  )
,
””) *
principalColumn
‘‘ 
:
‘‘  
$str
‘‘! %
)
‘‘% &
;
‘‘& '
}
’’ 	
}
÷÷ 
}◊◊ …
>C:\VisualStudio\WorkoutApp\Back-End\API\Data\UserRepository.cs
	namespace 	
API
 
. 
Data 
{ 
public 

class 
UserRepository 
:  !
IUserRepository" 1
{ 
private 
readonly 
DataContext $
_context% -
;- .
public

 
UserRepository

 
(

 
DataContext

 )
context

* 1
)

1 2
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
AppUser !
>! "
GetByIdAsync# /
(/ 0
int0 3
id4 6
)6 7
{ 	
return 
await 
_context !
.! "
Users" '
. 
Include 
( 
w 
=> 
w 
.  
Workouts  (
)( )
.  
SingleOrDefaultAsync %
<% &
AppUser& -
>- .
(. /
x/ 0
=>1 3
x4 5
.5 6
Id6 8
==9 ;
id< >
)> ?
;? @
} 	
public 
async 
Task 
< 
bool 
> 
SaveAllAsync  ,
(, -
)- .
{ 	
return 
await 
_context !
.! "
SaveChangesAsync" 2
(2 3
)3 4
>5 6
$num7 8
;8 9
} 	
public 
void 
Update 
( 
AppUser "
user# '
)' (
{ 	
_context 
. 
Entry 
( 
user 
)  
.  !
State! &
=' (
EntityState) 4
.4 5
Modified5 =
;= >
} 	
} 
}   Á
BC:\VisualStudio\WorkoutApp\Back-End\API\Data\WorkoutsRepository.cs
	namespace 	
API
 
. 
Data 
{ 
public 

class 
WorkoutsRepository #
:$ %
IWorkoutRepository& 8
{ 
private		 
readonly		 
DataContext		 $
_context		% -
;		- .
public 
WorkoutsRepository !
(! "
DataContext" -
context. 5
)5 6
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IEnumerable %
<% &
Workouts& .
>. /
>/ 0
GetAllWorkouts1 ?
(? @
)@ A
{ 	
return 
await 
_context !
.! "
Workouts" *
. 
Include 
( 
e 
=> 
e 
.  
	Exercises  )
)) *
. 
Include 
( 
u 
=> 
u 
.  
UserId  &
)& '
. 
ToListAsync 
( 
) 
; 
} 	
public 
async 
Task 
< 
Workouts "
>" #
GetWorkoutbyName$ 4
(4 5
string5 ;
name< @
)@ A
{ 	
return 
await 
_context !
.! "
Workouts" *
. 
Include 
( 
e 
=> 
e 
.  
	Exercises  )
)) *
. 
Include 
( 
u 
=> 
u 
.  
UserId  &
)& '
. 
FirstOrDefaultAsync $
($ %
x% &
=>' )
x* +
.+ ,
Name, 0
==1 3
name4 8
)8 9
;9 :
} 	
public   
async   
Task   
<   
Workouts   "
>  " #
GetWorkoutsbyId  $ 3
(  3 4
int  4 7
id  8 :
)  : ;
{!! 	
return"" 
await"" 
_context"" !
.""! "
Workouts""" *
.## 
Include## 
(## 
e## 
=>## 
e## 
.##  
	Exercises##  )
)##) *
.$$ 
Include$$ 
($$ 
u$$ 
=>$$ 
u$$ 
.$$  
UserId$$  &
)$$& '
.%% 
FirstOrDefaultAsync%% $
(%%$ %
x%%% &
=>%%' )
x%%* +
.%%+ ,
Id%%, .
==%%/ 1
id%%2 4
)%%4 5
;%%5 6
}'' 	
}(( 
})) Í
;C:\VisualStudio\WorkoutApp\Back-End\API\DTOs\ExerciseDTO.cs
	namespace 	
API
 
. 
DTOs 
{ 
public 

class 
ExerciseDTO 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public		 
string		 
Muscle		 
{		 
get		 "
;		" #
set		$ '
;		' (
}		) *
public 
ICollection 
< 

WorkoutDTO %
>% &
Workouts' /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
public 
ICollection 
< 
PhotoDTO #
># $
Photo% *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
} 
} ˆ
AC:\VisualStudio\WorkoutApp\Back-End\API\DTOs\ExerciseUpdateDTO.cs
	namespace 	
API
 
. 
DTOs 
{ 
public 

class 
ExerciseUpdateDTO "
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Muscle 
{ 
get "
;" #
set$ '
;' (
}) *
public

 
ICollection

 
<

 

WorkoutDTO

 %
>

% &
Workouts

' /
{

0 1
get

2 5
;

5 6
set

7 :
;

: ;
}

< =
public 
ICollection 
< 
PhotoDTO #
># $
Photo% *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
} 
} ñ
8C:\VisualStudio\WorkoutApp\Back-End\API\DTOs\LoginDTO.cs
	namespace 	
API
 
. 
DTOs 
{ 
public 

class 
LoginDTO 
{ 
[ 	
Required	 
] 
public 
string 
Username 
{  
get! $
;$ %
set& )
;) *
}+ ,
[		 	
Required			 
]		 
public

 
string

 
Password

 
{

  
get

! $
;

$ %
set

& )
;

) *
}

+ ,
} 
} Á
9C:\VisualStudio\WorkoutApp\Back-End\API\DTOs\MemberDTO.cs
	namespace 	
API
 
. 
DTOs 
{ 
public 

class 
	MemberDTO 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public

 
string

 
Username

 
{

  
get

! $
;

$ %
set

& )
;

) *
}

+ ,
public 
DateTime 
Created 
{  !
get" %
;% &
set' *
;* +
}, -
=. /
DateTime0 8
.8 9
Now9 <
;< =
public 
IList 
< 
Workouts 
> 
Workouts '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} ê	
8C:\VisualStudio\WorkoutApp\Back-End\API\DTOs\PhotoDTO.cs
	namespace 	
API
 
. 
DTOs 
{ 
public 

class 
PhotoDTO 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Url 
{ 
get 
;  
set! $
;$ %
}& '
public		 
bool		 
IsMain		 
{		 
get		  
;		  !
set		" %
;		% &
}		' (
public 
ExerciseDTO 
	Exercises $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
UserDto 
AppUser 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
int 
	AppUserId 
{ 
get "
;" #
set$ '
;' (
}) *
} 
} œ
;C:\VisualStudio\WorkoutApp\Back-End\API\DTOs\RegisterDTO.cs
	namespace 	
API
 
. 
DTOs 
{ 
public 

class 
RegisterDTO 
{ 
[ 	
Required	 
] 
public 
string 
Username 
{  
get! $
;$ %
set& )
;) *
}+ ,
[		 	
Required			 
]		 
[

 	
StringLength

	 
(

 
$num

 
,

 
MinimumLength

 &
=

' (
$num

) *
)

* +
]

+ ,
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ©
7C:\VisualStudio\WorkoutApp\Back-End\API\DTOs\UserDto.cs
	namespace 	
API
 
. 
DTOs 
{ 
public 

class 
UserDto 
{ 
public 
string 
Username 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Token 
{ 
get !
;! "
set# &
;& '
}( )
}		 
}

 ñ	
:C:\VisualStudio\WorkoutApp\Back-End\API\DTOs\WorkoutDTO.cs
	namespace 	
API
 
. 
DTOs 
{ 
public 

class 

WorkoutDTO 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public		 
UserDto		 
UserId		 
{		 
get		  #
;		# $
set		% (
;		( )
}		* +
public 
ExerciseDTO 
	Exercises $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
TimeOnly 
Time 
{ 
get "
;" #
set$ '
;' (
}) *
public 
DateTime 
Date 
{ 
get "
;" #
set$ '
;' (
}) *
} 
} ¯	
;C:\VisualStudio\WorkoutApp\Back-End\API\Entities\AppUser.cs
public 
class 
AppUser 
{ 
public 

int 
Id 
{ 
get 
; 
set 
; 
} 
public 

string 
UserName 
{ 
get  
;  !
set" %
;% &
}' (
public

 

byte

 
[

 
]

 
PasswordHash

 
{

  !
get

" %
;

% &
set

' *
;

* +
}

, -
public 

byte 
[ 
] 
PasswordSalt 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 

DateTime 
Created 
{ 
get !
;! "
set# &
;& '
}( )
=* +
DateTime, 4
.4 5
Now5 8
;8 9
public 

IList 
< 
Workouts 
> 
Workouts #
{$ %
get& )
;) *
set+ .
;. /
}0 1
} È
=C:\VisualStudio\WorkoutApp\Back-End\API\Entities\Exercises.cs
	namespace 	
API
 
. 
Entities 
{ 
public 

class 
	Exercises 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Muscle 
{ 
get "
;" #
set$ '
;' (
}) *
public

 
ICollection

 
<

 
Workouts

 #
>

# $
Workouts

% -
{

. /
get

0 3
;

3 4
set

5 8
;

8 9
}

: ;
public 
ICollection 
< 
Photo  
>  !
Photo" '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} Ò	
9C:\VisualStudio\WorkoutApp\Back-End\API\Entities\Photo.cs
	namespace 	
API
 
. 
Entities 
{ 
[ 
Table 

(
 
$str 
) 
] 
public 

class 
Photo 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public		 
string		 
Url		 
{		 
get		 
;		  
set		! $
;		$ %
}		& '
public 
bool 
IsMain 
{ 
get  
;  !
set" %
;% &
}' (
public 
	Exercises 
	Exercises "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
AppUser 
AppUser 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
int 
	AppUserId 
{ 
get "
;" #
set$ '
;' (
}) *
} 
} œ	
<C:\VisualStudio\WorkoutApp\Back-End\API\Entities\Workouts.cs
	namespace 	
API
 
. 
Entities 
{ 
public 

class 
Workouts 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
AppUser 
UserId 
{ 
get  #
;# $
set% (
;( )
}* +
public

 
ICollection

 
<

 
	Exercises

 $
>

$ %
	Exercises

& /
{

0 1
get

2 5
;

5 6
set

7 :
;

: ;
}

< =
public 
TimeOnly 
Time 
{ 
get "
;" #
set$ '
;' (
}) *
public 
DateTime 
Date 
{ 
get "
;" #
set$ '
;' (
}) *
} 
} ˆ	
>C:\VisualStudio\WorkoutApp\Back-End\API\Errors\ApiException.cs
	namespace 	
API
 
. 
Errors 
{ 
public 

class 
ApiException 
{ 
public 
ApiException 
( 
int 

statusCode  *
,* +
string, 2
message3 :
=; <
null= A
,A B
stringC I
detailsJ Q
=R S
nullT X
)X Y
{ 	

StatusCode 
= 

statusCode #
;# $
Message 
= 
message 
; 
Details		 
=		 
details		 
;		 
}

 	
public 
int 

StatusCode 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Message 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Details 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} ï
RC:\VisualStudio\WorkoutApp\Back-End\API\Extensions\ApplicationServiceExtensions.cs
	namespace 	
API
 
. 

Extensions 
{ 
public		 

static		 
class		 (
ApplicationServiceExtensions		 4
{

 
public 
static 
IServiceCollection ("
AddApplicationServices) ?
(? @
this@ D
IServiceCollectionE W
servicesX `
,` a
IConfigurationb p
configq w
)w x
{ 	
services 
. 
	AddScoped 
< 
ITokenService ,
,, -
TokenService. :
>: ;
(; <
)< =
;= >
services 
. 
	AddScoped 
< 
IUserRepository .
,. /
UserRepository0 >
>> ?
(? @
)@ A
;A B
services 
. 
	AddScoped 
<  
IExercisesRepository 3
,3 4
ExercisesRepository5 H
>H I
(I J
)J K
;K L
services 
. 
	AddScoped 
< 
IWorkoutRepository 1
,1 2
WorkoutsRepository3 E
>E F
(F G
)G H
;H I
services 
. 
AddAutoMapper "
(" #
typeof# )
() *
AutoMapperProfiles* <
)< =
.= >
Assembly> F
)F G
;G H
services 
. 
AddDbContext !
<! "
DataContext" -
>- .
(. /
options/ 6
=>7 9
{ 
options 
. 
	UseSqlite !
(! "
config" (
.( )
GetConnectionString) <
(< =
$str= P
)P Q
)Q R
;R S
} 
) 
; 
return 
services 
; 
} 	
} 
} ‰
OC:\VisualStudio\WorkoutApp\Back-End\API\Extensions\IdentityServiceExtensions.cs
	namespace 	
API
 
. 

Extensions 
{ 
public 

static 
class %
IdentityServiceExtensions 1
{ 
public		 
static		 
IServiceCollection		 (
AddIdentityServices		) <
(		< =
this		= A
IServiceCollection		B T
services		U ]
,		] ^
IConfiguration		_ m
config		n t
)		t u
{

 	
services 
. 
AddAuthentication &
(& '
JwtBearerDefaults' 8
.8 9 
AuthenticationScheme9 M
)M N
. 
AddJwtBearer 
( 
options $
=>% '
{ 
options 
. %
TokenValidationParameters 4
=5 6
new7 :%
TokenValidationParameters; T
{ $
ValidateIssuerSigningKey /
=0 1
true2 6
,6 7
IssuerSigningKey '
=( )
new* - 
SymmetricSecurityKey. B
(B C
EncodingC K
.K L
UTF8L P
.P Q
GetBytesQ Y
(Y Z
configZ `
[` a
$stra k
]k l
)l m
)m n
,n o
ValidateIssuer %
=& '
false( -
,- .
ValidateAudience '
=( )
false* /
,/ 0
} 
; 
} 
) 
; 
return 
services 
; 
} 	
} 
} õ
EC:\VisualStudio\WorkoutApp\Back-End\API\Helpers\AutoMapperProfiles.cs
	namespace 	
API
 
. 
Helpers 
{ 
public 

class 
AutoMapperProfiles #
:$ %
Profile& -
{ 
public		 
AutoMapperProfiles		 !
(		! "
)		" #
{

 	
	CreateMap 
< 
AppUser 
, 
	MemberDTO (
>( )
() *
)* +
;+ ,
	CreateMap 
< 
Photo 
, 
PhotoDTO %
>% &
(& '
)' (
;( )
	CreateMap 
< 
	Exercises 
,  
ExerciseDTO! ,
>, -
(- .
). /
;/ 0
	CreateMap 
< 
Workouts 
, 

WorkoutDTO  *
>* +
(+ ,
), -
;- .
} 	
} 
} €
JC:\VisualStudio\WorkoutApp\Back-End\API\Interfaces\IExercisesRepository.cs
	namespace 	
API
 
. 

Interfaces 
{ 
public 

	interface  
IExercisesRepository )
{ 
Task 
< 
	Exercises 
> 
GetExercisesbyID (
(( )
int) ,
id- /
)/ 0
;0 1
Task		 
<		 
IEnumerable		 
<		 
	Exercises		 "
>		" #
>		# $
GetAllExercises		% 4
(		4 5
)		5 6
;		6 7
Task 
< 
	Exercises 
> 
GetExercisebyName )
() *
string* 0
name1 5
)5 6
;6 7
void 
Update 
( 
	Exercises 
exercise &
)& '
;' (
Task 
< 
bool 
> 
SaveAllAsync 
(  
)  !
;! "
} 
} ë
CC:\VisualStudio\WorkoutApp\Back-End\API\Interfaces\ITokenService.cs
	namespace 	
API
 
. 

Interfaces 
{ 
public 

	interface 
ITokenService "
{ 
string 
CreateToken 
( 
AppUser "
user# '
)' (
;( )
} 
} ƒ
EC:\VisualStudio\WorkoutApp\Back-End\API\Interfaces\IUserRepository.cs
	namespace 	
API
 
. 

Interfaces 
{ 
public 

	interface 
IUserRepository $
{ 
void 
Update 
( 
AppUser 
user  
)  !
;! "
Task 
< 
bool 
> 
SaveAllAsync 
(  
)  !
;! "
Task		 
<		 
AppUser		 
>		 
GetByIdAsync		 "
(		" #
int		# &
id		' )
)		) *
;		* +
} 
} Ñ
HC:\VisualStudio\WorkoutApp\Back-End\API\Interfaces\IWorkoutRepository.cs
	namespace 	
API
 
. 

Interfaces 
{ 
public 

	interface 
IWorkoutRepository '
{ 
public 
Task 
< 
Workouts 
> 
GetWorkoutsbyId -
(- .
int. 1
id2 4
)4 5
;5 6
public		 
Task		 
<		 
IEnumerable		 
<		  
Workouts		  (
>		( )
>		) *
GetAllWorkouts		+ 9
(		9 :
)		: ;
;		; <
public 
Task 
< 
Workouts 
> 
GetWorkoutbyName .
(. /
string/ 5
name6 :
): ;
;; <
} 
} ‰
IC:\VisualStudio\WorkoutApp\Back-End\API\Middleware\ExceptionMiddleware.cs
	namespace 	
API
 
. 

Middleware 
{ 
public 

class 
ExceptionMiddleware $
{ 
private		 
readonly		 
RequestDelegate		 (
_next		) .
;		. /
private

 
readonly

 
ILogger

  
<

  !
ExceptionMiddleware

! 4
>

4 5
_logger

6 =
;

= >
private 
readonly 
IHostEnvironment )
_env* .
;. /
public 
ExceptionMiddleware "
(" #
RequestDelegate# 2
next3 7
,7 8
ILogger9 @
<@ A
ExceptionMiddlewareA T
>T U
loggerV \
,\ ]
IHostEnvironment^ n
envo r
)r s
{ 	
_next 
= 
next 
; 
_logger 
= 
logger 
; 
_env 
= 
env 
; 
} 	
public 
async 
Task 
InvokeAsync %
(% &
HttpContext& 1
context2 9
)9 :
{ 	
try 
{ 
await 
_next 
( 
context #
)# $
;$ %
} 
catch 
( 
	Exception 
ex 
)  
{ 
_logger 
. 
LogError  
(  !
ex! #
,# $
ex% '
.' (
Message( /
)/ 0
;0 1
context 
. 
Response  
.  !
ContentType! ,
=- .
$str/ A
;A B
context 
. 
Response  
.  !

StatusCode! +
=, -
(. /
int/ 2
)2 3
HttpStatusCode3 A
.A B
InternalServerErrorB U
;U V
var!! 
response!! 
=!! 
_env!! #
.!!# $
IsDevelopment!!$ 1
(!!1 2
)!!2 3
?"" 
new"" 
ApiException"" &
(""& '
context""' .
."". /
Response""/ 7
.""7 8

StatusCode""8 B
,""B C
ex""D F
.""F G
Message""G N
,""N O
ex""P R
.""R S

StackTrace""S ]
?""] ^
.""^ _
ToString""_ g
(""g h
)""h i
)""i j
:## 
new## 
ApiException## &
(##& '
context##' .
.##. /
Response##/ 7
.##7 8

StatusCode##8 B
,##B C
$str##D [
)##[ \
;##\ ]
var%% 
options%% 
=%% 
new%% !!
JsonSerializerOptions%%" 7
{%%8 9 
PropertyNamingPolicy%%: N
=%%O P
JsonNamingPolicy%%Q a
.%%a b
	CamelCase%%b k
}%%l m
;%%m n
var'' 
json'' 
='' 
JsonSerializer'' )
.'') *
	Serialize''* 3
(''3 4
response''4 <
,''< =
options''> E
)''E F
;''F G
await)) 
context)) 
.)) 
Response)) &
.))& '

WriteAsync))' 1
())1 2
json))2 6
)))6 7
;))7 8
}** 
}++ 	
}-- 
}.. É

2C:\VisualStudio\WorkoutApp\Back-End\API\Program.cs
	namespace

 	
API


 
{ 
public 

class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{ 	
CreateHostBuilder 
( 
args "
)" #
.# $
Build$ )
() *
)* +
.+ ,
Run, /
(/ 0
)0 1
;1 2
} 	
public 
static 
IHostBuilder "
CreateHostBuilder# 4
(4 5
string5 ;
[; <
]< =
args> B
)B C
=>D F
Host 
.  
CreateDefaultBuilder %
(% &
args& *
)* +
. $
ConfigureWebHostDefaults )
() *

webBuilder* 4
=>5 7
{ 

webBuilder 
. 

UseStartup )
<) *
Startup* 1
>1 2
(2 3
)3 4
;4 5
} 
) 
; 
} 
} ƒ
@C:\VisualStudio\WorkoutApp\Back-End\API\Services\TokenService.cs
	namespace 	
API
 
. 
Services 
{ 
public		 

class		 
TokenService		 
:		 
ITokenService		  -
{

 
private 
readonly  
SymmetricSecurityKey -
_key. 2
;2 3
public 
TokenService 
( 
IConfiguration *
config+ 1
)1 2
{ 	
_key 
= 
new  
SymmetricSecurityKey +
(+ ,
Encoding, 4
.4 5
UTF85 9
.9 :
GetBytes: B
(B C
configC I
[I J
$strJ T
]T U
)U V
)V W
;W X
} 	
public 
string 
CreateToken !
(! "
AppUser" )
user* .
). /
{ 	
var 
claims 
= 
new 
List !
<! "
Claim" '
>' (
{ 
new 
Claim 
( #
JwtRegisteredClaimNames 1
.1 2
NameId2 8
,8 9
user: >
.> ?
UserName? G
)G H
} 
; 
var 
creds 
= 
new 
SigningCredentials .
(. /
_key/ 3
,3 4
SecurityAlgorithms5 G
.G H
HmacSha512SignatureH [
)[ \
;\ ]
var 
tokenDescriptor 
=  !
new" %#
SecurityTokenDescriptor& =
{ 
Subject 
= 
new 
ClaimsIdentity ,
(, -
claims- 3
)3 4
,4 5
Expires 
= 
DateTime "
." #
Now# &
.& '
AddDays' .
(. /
$num/ 0
)0 1
,1 2
SigningCredentials "
=# $
creds% *
} 
; 
var   
tokenHandler   
=   
new   "#
JwtSecurityTokenHandler  # :
(  : ;
)  ; <
;  < =
var"" 
token"" 
="" 
tokenHandler"" $
.""$ %
CreateToken""% 0
(""0 1
tokenDescriptor""1 @
)""@ A
;""A B
return$$ 
tokenHandler$$ 
.$$  

WriteToken$$  *
($$* +
token$$+ 0
)$$0 1
;$$1 2
}%% 	
}&& 
}'' Ò
2C:\VisualStudio\WorkoutApp\Back-End\API\Startup.cs
	namespace 	
API
 
{ 
public 

class 
Startup 
{ 
private 
readonly 
IConfiguration '
_config( /
;/ 0
public 
Startup 
( 
IConfiguration %
config& ,
), -
{   	
_config!! 
=!! 
config!! 
;!! 
}"" 	
public$$ 
IConfiguration$$ 
Configuration$$ +
{$$, -
get$$. 1
;$$1 2
}$$3 4
public'' 
void'' 
ConfigureServices'' %
(''% &
IServiceCollection''& 8
services''9 A
)''A B
{(( 	
services)) 
.)) "
AddApplicationServices)) +
())+ ,
_config)), 3
)))3 4
;))4 5
services** 
.** 
AddControllers** #
(**# $
)**$ %
.**% &
AddNewtonsoftJson**& 7
(**7 8
options**8 ?
=>**@ B
{++ 
options,, 
.,, 
SerializerSettings,, *
.,,* +!
ReferenceLoopHandling,,+ @
=,,A B!
ReferenceLoopHandling,,C X
.,,X Y
Ignore,,Y _
;,,_ `
}-- 
)-- 
;-- 
services.. 
... 
AddCors.. 
(.. 
).. 
;.. 
services// 
.// 
AddIdentityServices// (
(//( )
_config//) 0
)//0 1
;//1 2
services00 
.00 
AddSwaggerGen00 "
(00" #
c00# $
=>00% '
{11 
c22 
.22 

SwaggerDoc22 
(22 
$str22 !
,22! "
new22# &
OpenApiInfo22' 2
{223 4
Title225 :
=22; <
$str22= G
,22G H
Version22I P
=22Q R
$str22S W
}22X Y
)22Y Z
;22Z [
}33 
)33 
;33 
}44 	
public77 
void77 
	Configure77 
(77 
IApplicationBuilder77 1
app772 5
,775 6
IWebHostEnvironment777 J
env77K N
)77N O
{88 	
app?? 
.?? 
UseMiddleware?? 
<?? 
ExceptionMiddleware?? 1
>??1 2
(??2 3
)??3 4
;??4 5
appBB 
.BB 
UseHttpsRedirectionBB #
(BB# $
)BB$ %
;BB% &
appDD 
.DD 

UseRoutingDD 
(DD 
)DD 
;DD 
appFF 
.FF 
UseCorsFF 
(FF 
policyFF 
=>FF !
policyFF" (
.FF( )
AllowAnyHeaderFF) 7
(FF7 8
)FF8 9
.FF9 :
AllowAnyMethodFF: H
(FFH I
)FFI J
.FFJ K
WithOriginsFFK V
(FFV W
$strFFW o
)FFo p
)FFp q
;FFq r
appHH 
.HH 
UseAuthenticationHH !
(HH! "
)HH" #
;HH# $
appJJ 
.JJ 
UseAuthorizationJJ  
(JJ  !
)JJ! "
;JJ" #
appLL 
.LL 
UseEndpointsLL 
(LL 
	endpointsLL &
=>LL' )
{MM 
	endpointsNN 
.NN 
MapControllersNN (
(NN( )
)NN) *
;NN* +
}OO 
)OO 
;OO 
}PP 	
}QQ 
}RR 